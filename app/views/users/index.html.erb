<%# app/views/users/index.html.erb %>
<h1>Users</h1>

<%#
    Filterrific adds the `form_for_filterrific` view helper:
    * adds dom id 'filterrific_filter'
    * applies javascript behaviors:
        * AJAX form submission on change
        * AJAX spinner while AJAX request is being processed
    * sets form_for options like :url, :method and input name prefix
%>
<%= form_for_filterrific @filterrific, html: { id: 'filterrific-no-ajax-auto-submit' } do |f| %>
    <div>
        Search
        <%# give the search field the 'filterrific-periodically-observed' class for live updates %>
        <%= f.text_field(
        :search_query,
        class: 'filterrific-periodically-observed'
        ) %>
    </div>
    <div>
        Registered after
        <%= f.text_field(:with_created_at_gte, class: 'js-datepicker') %>
    </div>
    <div>
        Sorted by
        <%= f.select(:sorted_by, @filterrific.select_options[:sorted_by]) %>
    </div>
    <div>
        <%= link_to(
        'Reset filters',
        reset_filterrific_url,
        ) %>
    </div>
    <%# add an automated spinner to your form when the list is refreshed %>
    <!--%= render_filterrific_spinner %-->
    <%= f.submit 'Filter' %>
<% end %>

<%= render(
    partial: 'users/list',
    locals: { users: @users }
) %>